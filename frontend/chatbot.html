<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chatbot - StudyFlow</title>

    <!-- Shared CSS -->
    <link rel="stylesheet" href="css/shared/variables.css">
    <link rel="stylesheet" href="css/shared/layout.css">
    <link rel="stylesheet" href="css/shared/header.css">
    <link rel="stylesheet" href="css/shared/buttons.css">
    <link rel="stylesheet" href="css/shared/cards.css">

    <!-- Page-specific CSS -->
    <link rel="stylesheet" href="css/pages/chatbot.css">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Header Navigation -->
    <header class="header">
        <div class="nav-container">
            <a href="dashboard.html" class="logo">
                <i class="fas fa-graduation-cap logo-icon"></i>
                <span class="logo-text">StudyFlow</span>
            </a>

            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>

            <nav>
                <ul class="nav-links" id="navLinks">
                    <li><a href="dashboard.html" class="nav-link">
                            <i class="fas fa-home"></i> Dashboard
                        </a></li>
                    <li><a href="session.html" class="nav-link">
                            <i class="fas fa-plus-circle"></i> New Session
                        </a></li>
                    <li><a href="history.html" class="nav-link">
                            <i class="fas fa-history"></i> History
                        </a></li>
                    <li><a href="chatbot.html" class="nav-link active">
                            <i class="fas fa-robot"></i> AI Assistant
                        </a></li>
                    <li><a href="profile.html" class="nav-link">
                            <i class="fas fa-user"></i> Profile
                        </a></li>
                </ul>
            </nav>

            <div class="user-info">
                <div class="user-avatar loading-placeholder" id="userAvatar">U</div>
                <span class="user-name loading-placeholder" id="userName">Loading...</span>
                <button class="logout-btn" id="logoutBtn" title="Logout">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Chat Header -->
            <div class="chat-header">
                <div class="chat-header-icon">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="chat-header-content">
                    <h1 class="chat-title">AI Study Assistant</h1>
                    <p class="chat-subtitle">Powered by Google Gemini â€¢ Ask me anything!</p>
                </div>
            </div>

            <!-- Chat Container -->
            <div class="chat-container card">
                <!-- Messages Area -->
                <div class="messages-container" id="messagesContainer">
                    <div class="welcome-message">
                        <div class="welcome-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h3>Hello! I'm your AI Study Assistant ðŸ‘‹</h3>
                        <p>I'm here to help you with your studies. Feel free to ask me:</p>
                        <ul class="suggestion-list">
                            <li><i class="fas fa-check-circle"></i> Study tips and techniques</li>
                            <li><i class="fas fa-check-circle"></i> Subject explanations</li>
                            <li><i class="fas fa-check-circle"></i> Time management advice</li>
                            <li><i class="fas fa-check-circle"></i> Motivation and productivity</li>
                        </ul>
                    </div>
                </div>

                <!-- Typing Indicator -->
                <div class="typing-indicator hidden" id="typingIndicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>

                <!-- Input Area -->
                <div class="input-container">
                    <form id="chatForm" class="chat-form">
                        <div class="input-wrapper">
                            <input type="text" id="messageInput" class="message-input"
                                placeholder="Type your message here..." autocomplete="off" required>
                            <button type="submit" class="send-btn" id="sendBtn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Quick Suggestions -->
            <div class="quick-suggestions" id="quickSuggestions">
                <p class="suggestions-label">Quick suggestions:</p>
                <div class="suggestion-pills">
                    <button class="suggestion-pill" data-message="What's the Pomodoro technique?">
                        <i class="fas fa-clock"></i> Pomodoro technique
                    </button>
                    <button class="suggestion-pill" data-message="How can I improve my focus?">
                        <i class="fas fa-brain"></i> Improve focus
                    </button>
                    <button class="suggestion-pill" data-message="Give me study motivation">
                        <i class="fas fa-fire"></i> Get motivated
                    </button>
                    <button class="suggestion-pill" data-message="How do I manage stress during exams?">
                        <i class="fas fa-heart"></i> Manage stress
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- JavaScript -->
    <script src="js/shared/utils.js"></script>
    <script src="js/shared/api.js"></script>
    <script src="js/shared/auth.js"></script>
    <script src="js/shared/components.js"></script>
    <script src="js/pages/chatbot.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Check authentication
            if (!Auth.isLoggedIn()) {
                window.location.href = 'login.html';
                return;
            }

            // Initialize mobile menu
            Components.initMobileMenu();

            // Initialize logout button
            document.getElementById('logoutBtn').addEventListener('click', function () {
                Auth.logout();
            });

            // Initialize chatbot
            Chatbot.init();
        });
    </script>
</body>

</html>